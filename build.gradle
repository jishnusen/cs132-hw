apply plugin: 'java'

repositories {
    jcenter()
}

dependencies {
    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'
}

repositories {
   flatDir {
       dirs 'lib'
   }
}

dependencies {
    implementation name: 'cs132'
}


sourceSets {
    main {
        java {
            srcDir "src/main/java"
        }
    }
}

task testSuite(type: Exec) {
    dependsOn jar
    executable "bash"
    args "./test.sh"
}

test {
    dependsOn tasks.testSuite
}

task run (type: JavaExec) {
    standardInput = System.in
    main = "Compile"
    classpath = sourceSets.main.runtimeClasspath
}

task sourcesTar(type: Tar, dependsOn: classes) {
    from sourceSets.main.allJava
    duplicatesStrategy = 'include'
}

artifacts {
    archives sourcesTar
}
